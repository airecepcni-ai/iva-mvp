############################################
# apps/web environment configuration
# Copy this file to: apps/web/.env.local
# Then replace placeholder values with real secrets
############################################

#===================================
# Auth.js (required)
#===================================
# Generate with: openssl rand -base64 32
AUTH_SECRET=your_64_char_random_secret_here

# IMPORTANT: AUTH_URL must NOT include /api/auth - the basePath in auth.js handles that
# Local dev:
AUTH_URL=http://localhost:4000
# Production (set to your Vercel domain):
# AUTH_URL=https://your-app.vercel.app

AUTH_TRUST_HOST=true

#===================================
# Google OAuth (required for "Login with Google")
#===================================
# Get these from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=123456789012-xxxxxxxxxxxxxxxxxxxxxxxxxxxx.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=GOCSPX-xxxxxxxxxxxxxxxxxxxxxxxx

#===================================
# Database (required - Supabase Postgres)
#===================================
# Get this from: Supabase Dashboard → Settings → Database → Connection string (URI)

# Recommended for dev (avoids direct Postgres IPv6/5432 issues on some networks):
# - Supabase Dashboard → Settings → Database → Connection pooling → URI (PgBouncer, port 6543)
AUTH_DB_POOLER_URL=postgresql://postgres.xxxx:password@aws-0-region.pooler.supabase.com:6543/postgres

# For production (use Transaction pooler mode):
DB_POOLER_URL=postgresql://postgres.xxxx:password@aws-0-region.pooler.supabase.com:6543/postgres

# Fallback / legacy:
# - Supabase Dashboard → Settings → Database → Connection string (direct, usually port 5432)
DATABASE_URL=postgresql://postgres.xxxx:password@db.xxxx.supabase.co:5432/postgres

# Optional: SSL certificate verification (set to false for Supabase dev)
DATABASE_SSL_REJECT_UNAUTHORIZED=false

#===================================
# Stripe (required for payments)
#===================================
# Get these from: https://dashboard.stripe.com/apikeys
# Use sk_test_* for testing, sk_live_* for production
STRIPE_SECRET_KEY=YOUR_STRIPE_SECRET_KEY

# Webhook signing secret - get from Stripe Dashboard → Webhooks → Your endpoint → Signing secret
# CRITICAL: This is required for webhook signature verification in production!
STRIPE_WEBHOOK_SECRET=YOUR_STRIPE_WEBHOOK_SECRET

# Optional: Override default price IDs (if different from hardcoded test values)
# STRIPE_PRICE_TIER1=price_xxx
# STRIPE_PRICE_TIER2=price_xxx
# STRIPE_PRICE_TIER3=price_xxx

#===================================
# IVA Backend Base URL (optional)
#===================================
# If you have a separate IVA backend deployed, configure its base URL here.
# Client-side (Vite): VITE_BACKEND_BASE_URL=https://your-iva-backend.vercel.app
# Legacy client env: VITE_IVA_BACKEND_URL is still supported.
# Server-side: BACKEND_BASE_URL=https://your-iva-backend.vercel.app
# Legacy server env: IVA_BACKEND_URL is still respected.
# Production note: set BACKEND_BASE_URL on Vercel so route handlers proxy to the dedicated IVA backend;
# when empty, the server assumes same-origin (localhost:8787) which only works locally.

#===================================
# CORS (optional)
#===================================
# Comma-separated list of allowed origins for CORS
# CORS_ORIGINS=https://your-app.vercel.app,https://your-other-domain.com

#===================================
# Vercel-specific (auto-set by Vercel)
#===================================
# These are automatically set by Vercel, you don't need to configure them:
# VERCEL_URL - Your deployment URL
# NODE_ENV - Set to 'production' in production builds
